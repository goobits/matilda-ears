// Placeholder for QR code library - this would normally be the minified qrcode.js library
// For the demo, we'll create a simple QRCode constructor that creates a basic representation

class QRCode {
    constructor(element, options) {
        this.element = element;
        this.options = options;
        this.generate();
    }

    generate() {
        // Create a simple QR code representation
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');
        
        canvas.width = this.options.width || 200;
        canvas.height = this.options.height || 200;
        
        // Fill with white background
        ctx.fillStyle = this.options.colorLight || '#ffffff';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        
        // Create a simple QR pattern
        ctx.fillStyle = this.options.colorDark || '#000000';
        
        // Draw finder patterns (corners)
        this.drawFinderPattern(ctx, 0, 0, 50);
        this.drawFinderPattern(ctx, canvas.width - 50, 0, 50);
        this.drawFinderPattern(ctx, 0, canvas.height - 50, 50);
        
        // Draw some data modules (simplified pattern)
        const moduleSize = 5;
        for (let i = 60; i < canvas.width - 60; i += moduleSize * 2) {
            for (let j = 60; j < canvas.height - 60; j += moduleSize * 2) {
                if (Math.random() > 0.5) {
                    ctx.fillRect(i, j, moduleSize, moduleSize);
                }
            }
        }
        
        // Add text below QR code
        const container = document.createElement('div');
        container.style.textAlign = 'center';
        container.appendChild(canvas);
        
        const text = document.createElement('div');
        text.style.marginTop = '10px';
        text.style.fontSize = '12px';
        text.style.color = '#666';
        text.textContent = 'QR Code for STT Server';
        container.appendChild(text);
        
        this.element.appendChild(container);
    }
    
    drawFinderPattern(ctx, x, y, size) {
        // Draw outer square
        ctx.fillRect(x, y, size, size);
        
        // Draw inner white square
        ctx.fillStyle = '#ffffff';
        ctx.fillRect(x + 7, y + 7, size - 14, size - 14);
        
        // Draw center black square
        ctx.fillStyle = '#000000';
        ctx.fillRect(x + 14, y + 14, size - 28, size - 28);
    }
}

// Correct levels constant
QRCode.CorrectLevel = {
    L: 1,
    M: 0,
    Q: 3,
    H: 2
};

// Make QRCode globally available
window.QRCode = QRCode;